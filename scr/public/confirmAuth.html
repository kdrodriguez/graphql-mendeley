<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>fdfd</title>
	<script>
		var token_temp;

		//Método para extraer el token de la url de devolución proporcionada por la API
		function getToken() {
			var params = {}, queryString = location.hash.substring(1),
				regex = /([^&=]+)=([^&]*)/g, m;
			while (m = regex.exec(queryString)) {
				params[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
			}
			//state = params.state;
			token_temp = params.access_token;
			return params.access_token;
		}

		// Método que almacena el token en una cookie
		function setCookie() {
			var d = new Date();
			d.setTime(d.getTime() + (365 * 24 * 60 * 60 * 1000));
			var expires = "expires=" + d.toUTCString();
			console.log("token=" + token_temp + ";" + expires + ";path=/");
			document.cookie = "token=" + token_temp + ";" + expires + ";path=/";
		}

		// Método para leer una cookie (NO es usado en la app)
		function getCookie(cname) {
			var name = cname + "=";
			var ca = document.cookie.split(';');
			for (var i = 0; i < ca.length; i++) {
				var c = ca[i];
				while (c.charAt(0) == ' ') {
					c = c.substring(1);
				}
				if (c.indexOf(name) == 0) {
					return c.substring(name.length, c.length);
				}
			}
			return "";
		}

		// Método para verificar si una cookie existe
		function checkCookie() {
			var token = getCookie("token");
			if (token != "") {
				alert("token cookie: " + token);
			} else {
				alert("No existe la cookie" );
				/*token = prompt("Please enter your cookie token:", "");
				if (token != "" && token != null) {
					setCookie("token", token, 365);
				}*/
			}
		}

	</script>
</head>

<body onload="getToken();">

	Esta página presenta a playground ........

	Nota: Esta página es consecuente del login de mendeley... sin embargo se la puede acceder por medio de la url
	y si no paso por el login, posiblemente no tendra permisos para acceder a los recursos del API, por favor asegurese
	de ingresar desde el botón PROBAR API desde la página de inicio del API. Si recarga la página asegurese de no
	modificar
	la url inicial ya que puede modificar el token y guardar un token inválido

	Para poder usar la API GraphQL, debe dar permiso de uso de su token de acceso para poder hacer llamadas a la API,
	este
	token se guardará en una cookie.

	<button onclick="setCookie()">Permitir (Guardar cookie)</button>

	<button onclick="checkCookie()">Ver cookie</button>

	<a href="playground" class="btn btn-primary btn-xl rounded-pill mt-4">Probar la API</a>

	Para ver información de la sesión actual, puede realizar una consulta en

	<br>
	--- Para los errores
	Los valores no válidos para scopey response_typese envían a la página de redireccionamiento de su aplicación. Una
	cadena de consulta HTTP contiene los campos errore error_descriptionindica la naturaleza del error.

	http://localhost/mendeley/sample.html?error=unsupported_grant_type&error_description=Invalid+response+type
	Su aplicación debe informar el error de autorización al usuario, explicar por qué se produjo un error y sugerir
	posibles soluciones.
</body>

</html>